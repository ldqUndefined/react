<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6918.206473994583 5448.457725445369" width="6918.206473994583" height="5448.457725445369">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style>
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
    </style>
  </defs>
  <rect x="0" y="0" width="6918.206473994583" height="5448.457725445369" fill="#ffffff"></rect><g transform="translate(10 2691.0082953892056) rotate(0 143.33413922058915 16.982717917131424)"><text x="0" y="23.965435834262834" font-family="Virgil, Segoe UI Emoji" font-size="27.172348667410265px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    ReactDOM.render</text></g><g transform="translate(90.21680666170033 2744.5768294442196) rotate(0 91.70667675250967 16.982717917131424)"><text x="0" y="23.965435834262834" font-family="Virgil, Segoe UI Emoji" font-size="27.172348667410265px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">this.setState</text></g><g transform="translate(91.2251555380301 2797.578830643716) rotate(0 91.0273680358244 16.982717917131424)"><text x="0" y="23.965435834262834" font-family="Virgil, Segoe UI Emoji" font-size="27.172348667410265px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">useState()[1]</text></g><g stroke-linecap="round"><g transform="translate(339.3680344732211 2772.122177152701) rotate(0 81.94870794410288 -0.9282553936551494)"><path d="M0 0.57 C27.74 0.29, 137.84 -0.16, 165.36 -0.53 M-1.46 -0.18 C26.27 -0.31, 137.08 -2.33, 164.75 -2.42" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(339.3680344732211 2772.122177152701) rotate(0 81.94870794410288 -0.9282553936551494)"><path d="M137.62 9.24 C143.25 6.58, 147.22 4.96, 164.08 -1.14 M136.98 9.11 C144.51 5, 152.89 2.48, 164.74 -1.81" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(339.3680344732211 2772.122177152701) rotate(0 81.94870794410288 -0.9282553936551494)"><path d="M137.38 -11.28 C143.25 -9.62, 147.27 -6.9, 164.08 -1.14 M136.74 -11.41 C144.47 -9.57, 152.92 -6.15, 164.74 -1.81" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g stroke-linecap="round" transform="translate(528.5893987304562 2733.976214647221) rotate(0 147.39887133447377 34.39306997804388)"><path d="M81.89 3.21 C96.13 0.84, 116.42 -0.5, 134.06 -0.68 C151.69 -0.87, 170.61 0.75, 187.7 2.12 C204.78 3.49, 222.36 5.04, 236.55 7.54 C250.73 10.04, 263.53 13.81, 272.83 17.14 C282.13 20.48, 289.09 23.6, 292.34 27.56 C295.6 31.52, 295.71 36.78, 292.35 40.92 C288.98 45.05, 281.49 48.75, 272.15 52.35 C262.81 55.94, 250.24 60.05, 236.3 62.49 C222.37 64.93, 205.54 65.92, 188.51 67 C171.48 68.08, 151.96 69.42, 134.14 68.98 C116.31 68.55, 97.52 66.16, 81.57 64.39 C65.62 62.61, 50.22 61.35, 38.45 58.32 C26.67 55.3, 17.32 50.28, 10.93 46.25 C4.54 42.22, 0.31 38.26, 0.11 34.14 C-0.08 30.03, 3.56 25.31, 9.75 21.58 C15.94 17.85, 24.46 14.67, 37.27 11.76 C50.09 8.86, 77.55 5.42, 86.66 4.13 C95.76 2.84, 90.85 3.7, 91.89 4.03 M203.89 4.08 C220.43 4.92, 235.55 5.7, 248.55 8.42 C261.55 11.15, 274.17 16.4, 281.89 20.43 C289.62 24.45, 293.77 28.41, 294.92 32.58 C296.07 36.75, 294.03 41.5, 288.81 45.43 C283.6 49.36, 274.58 53.13, 263.63 56.16 C252.68 59.19, 238.44 61.49, 223.11 63.6 C207.78 65.71, 189.09 68.07, 171.64 68.81 C154.2 69.55, 135.7 69.15, 118.43 68.03 C101.15 66.91, 83.2 64.22, 67.98 62.09 C52.75 59.95, 37.69 58.35, 27.06 55.23 C16.43 52.11, 8.39 47.45, 4.19 43.37 C-0.01 39.28, -0.19 34.96, 1.86 30.72 C3.91 26.49, 8.59 21.46, 16.51 17.98 C24.43 14.5, 35.77 12.31, 49.4 9.85 C63.04 7.38, 81.37 4.72, 98.33 3.2 C115.28 1.67, 133.35 0.9, 151.14 0.7 C168.92 0.51, 196.57 1.74, 205.03 2.03 C213.48 2.31, 203.11 2.03, 201.87 2.41" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(533.5893987304562 2754.3692846252648) rotate(0 142.39887133447377 14)"><text x="142.39887133447377" y="20" font-family="Virgil, Segoe UI Emoji" font-size="21.90751866684213px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">schedulerUpdateOnFiber</text></g><g stroke-linecap="round" transform="translate(1048.8894425777003 2721.470354694447) rotate(0 30.62241323044441 44.53119091979218)"><path d="M32.27 1.34 C40.44 11.07, 46.53 21.98, 60.3 44.07 M30.98 -0.53 C38.03 10.42, 45.29 23.25, 60.7 44.67 M61.72 43.06 C50.97 57.86, 42 74.66, 29.5 90.58 M60.36 44.61 C54.8 54.86, 49.81 64.3, 30.57 88.57 M30.49 89.47 C25.37 80.05, 14.29 66.82, -1.78 46.77 M30.54 88.39 C23.61 78.11, 14.82 64.9, 0.7 45.26 M1.09 44.69 C8.57 30.41, 18.4 14.55, 29.98 -1.07 M-0.86 45.41 C5.93 35.9, 13.83 25.41, 30.79 0.48" stroke="#000000" stroke-width="1" fill="none"></path></g><g stroke-linecap="round"><g transform="translate(839.0046419339878 2770.089277153316) rotate(0 99.52647933293918 -2.80261280051036)"><path d="M0.66 -0.19 C33.4 -1.2, 164.42 -4.41, 197.16 -5.42 M-0.46 -1.33 C32.61 -2.2, 166.17 -3.19, 199.51 -3.86" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(839.0046419339878 2770.089277153316) rotate(0 99.52647933293918 -2.80261280051036)"><path d="M171.15 5.63 C181.54 1.52, 190.23 -2.04, 198.44 -5.47 M171.87 5.84 C180.41 4.1, 187.91 0.66, 199.99 -4.35" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(839.0046419339878 2770.089277153316) rotate(0 99.52647933293918 -2.80261280051036)"><path d="M170.88 -14.89 C181.48 -11.62, 190.27 -7.82, 198.44 -5.47 M171.6 -14.68 C180.28 -10.49, 187.86 -8, 199.99 -4.35" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g stroke-linecap="round"><g transform="translate(1137.007174079134 2726.981334242247) rotate(356.158205555557 613.250256759461 34.748035515861744)"><path d="M-1.1 -0.39 C203.6 11.24, 1022.79 58.22, 1227.6 70.1 M0.52 -1.64 C205.12 10.09, 1022.21 58.85, 1226.64 71.14" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1137.007174079134 2726.981334242247) rotate(356.158205555557 613.250256759461 34.748035515861744)"><path d="M1197.23 79.65 C1203.35 78.13, 1211.71 75.78, 1225.4 70.73 M1197.15 78.93 C1204.84 76.59, 1213.22 75.39, 1226.07 70.37" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1137.007174079134 2726.981334242247) rotate(356.158205555557 613.250256759461 34.748035515861744)"><path d="M1198.46 59.16 C1204.33 62.67, 1212.38 65.35, 1225.4 70.73 M1198.37 58.44 C1205.69 61.36, 1213.76 65.41, 1226.07 70.37" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g stroke-linecap="round"><g transform="translate(1078.543265050546 2821.8646525194363) rotate(0 -3.86143930570546 259.2489432707195)"><path d="M0.08 0.49 C-1.1 86.64, -6.58 431.18, -7.81 517.57 M-1.33 -0.3 C-2.1 85.95, -4.5 432.6, -5.67 518.8" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1078.543265050546 2821.8646525194363) rotate(0 -3.86143930570546 259.2489432707195)"><path d="M-14.84 488.69 C-14.05 496.43, -9.47 503.85, -7.24 520.75 M-15 489.96 C-13.59 496.85, -11.2 501.43, -5.24 517.86" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1078.543265050546 2821.8646525194363) rotate(0 -3.86143930570546 259.2489432707195)"><path d="M5.68 488.89 C1.47 496.6, 1.05 503.97, -7.24 520.75 M5.52 490.16 C2.74 497.01, 0.94 501.55, -5.24 517.86" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g stroke-linecap="round" transform="translate(936.7318043270923 3395.2644041765207) rotate(0 147.39887133447377 34.393069978043854)"><path d="M121.83 0.31 C138.24 -0.69, 159.37 0.54, 176.65 1.33 C193.93 2.11, 210.72 3.05, 225.49 5.01 C240.27 6.97, 254.78 9.63, 265.32 13.1 C275.85 16.57, 283.95 21.8, 288.72 25.83 C293.48 29.86, 295.46 33.28, 293.93 37.29 C292.41 41.3, 287.58 46.15, 279.59 49.89 C271.61 53.64, 259.41 56.88, 246.03 59.77 C232.65 62.67, 215.99 65.84, 199.31 67.25 C182.63 68.66, 163.78 68.35, 145.93 68.24 C128.08 68.13, 108.76 68.07, 92.22 66.58 C75.67 65.09, 59.49 62.26, 46.64 59.28 C33.8 56.31, 23 52.31, 15.17 48.72 C7.33 45.13, 1.25 41.58, -0.36 37.73 C-1.96 33.88, 0.33 29.71, 5.54 25.62 C10.76 21.53, 20.05 16.67, 30.95 13.18 C41.86 9.7, 54.42 6.79, 70.97 4.7 C87.53 2.6, 118.83 1.19, 130.29 0.61 C141.74 0.03, 139.39 0.88, 139.68 1.23 M184.66 0.16 C201.56 0.89, 219.23 4.77, 233.92 7.62 C248.61 10.48, 262.94 13.82, 272.78 17.29 C282.63 20.75, 289.7 24.79, 292.97 28.41 C296.24 32.03, 295.75 35.25, 292.4 39.02 C289.05 42.79, 281.78 47.22, 272.87 51.03 C263.95 54.84, 252.93 59.27, 238.91 61.89 C224.9 64.51, 205.83 65.73, 188.78 66.75 C171.74 67.78, 153.94 68.25, 136.63 68.04 C119.32 67.82, 100.98 67.39, 84.93 65.47 C68.89 63.55, 52.83 59.56, 40.37 56.54 C27.92 53.51, 16.88 50.94, 10.19 47.33 C3.49 43.71, 0.46 38.78, 0.2 34.84 C-0.06 30.91, 2.54 27.62, 8.63 23.71 C14.71 19.8, 24.78 14.52, 36.71 11.37 C48.64 8.22, 64.37 6.75, 80.2 4.8 C96.03 2.86, 114.27 0.46, 131.7 -0.29 C149.13 -1.03, 176.04 -0.21, 184.78 0.33 C193.51 0.88, 184.56 2.26, 184.11 2.98" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(941.7318043270923 3415.6574741545646) rotate(0 142.39887133447377 14)"><text x="142.39887133447377" y="20" font-family="Virgil, Segoe UI Emoji" font-size="21.90751866684213px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">ensureRootIsScheduled</text></g><g stroke-linecap="round" transform="translate(780.6587538594149 3899.122243673556) rotate(0 338.46537381796634 165.0981286376326)"><path d="M0.08 -0.18 C202.88 0.77, 404.59 0.14, 676.57 -0.15 M-0.26 -0.31 C139.11 -1.12, 277.2 -1.66, 677.11 -0.27 M677.07 -1.07 C679.72 83.82, 680.18 164.6, 675.78 331.47 M677.51 0.35 C675.91 103.63, 675.02 206.99, 677.6 330.71 M677.43 330.19 C536.54 329.47, 396.29 329.1, -0.74 330.36 M676.7 329.88 C409.31 332.54, 141.72 332.66, -0.03 330.56 M-0.09 330.91 C-0.43 205.45, -0.08 83.33, -1 0.3 M0.4 330.27 C1.52 230.5, 0.27 129.79, -0.48 -0.37" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1053.4461634234406 3915.9864333420683) rotate(0 73.96892154231278 20.100250419106715)"><text x="0" y="28.200500838213486" font-family="Virgil, Segoe UI Emoji" font-size="32.16040067057077px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">Scheduler</text></g><g stroke-linecap="round"><g transform="translate(973.6171766883456 3535.6163382473824) rotate(40.7338166874492 111.35439828876935 127.30784904721929)"><path d="M1.1 -0.19 C38.22 42.11, 185.56 212.22, 222.5 254.97 M0.21 -1.33 C37.27 41.59, 184.93 212.76, 221.99 255.95" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(973.6171766883456 3535.6163382473824) rotate(40.7338166874492 111.35439828876935 127.30784904721929)"><path d="M195.51 242.66 C201.52 246.93, 211.1 250.29, 221.79 254.05 M195.53 242.22 C205.03 245.69, 213.68 250.91, 222.34 256.73" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(973.6171766883456 3535.6163382473824) rotate(40.7338166874492 111.35439828876935 127.30784904721929)"><path d="M211.06 229.28 C212.84 237.45, 218.05 244.57, 221.79 254.05 M211.08 228.83 C215.43 236.94, 218.81 246.68, 222.34 256.73" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g transform="translate(648.3756305826614 2940.9825958833835) rotate(0 196.61152930579692 58.27707006369428)"><text x="0" y="28.85138004246285" font-family="Virgil, Segoe UI Emoji" font-size="27.331229812469758px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">通过scheduleCallback将</text><text x="0" y="67.7027600849257" font-family="Virgil, Segoe UI Emoji" font-size="27.331229812469758px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">performSyncWorkOnRoot注册为</text><text x="0" y="106.55414012738855" font-family="Virgil, Segoe UI Emoji" font-size="27.331229812469758px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">Scheduler的一个任务</text></g><g stroke-linecap="round" transform="translate(788.2777091673581 4052.1761354372516) rotate(0 130.77861842345305 81.26572585161068)"><path d="M111.98 1.21 C126.54 -1.51, 144.76 -0.23, 160.23 2.01 C175.69 4.25, 191.76 9.04, 204.78 14.65 C217.8 20.26, 229.35 27.85, 238.35 35.67 C247.36 43.5, 255.2 52.11, 258.81 61.59 C262.42 71.07, 262.26 82.63, 260.02 92.57 C257.78 102.5, 253.03 112.58, 245.39 121.21 C237.74 129.84, 226.34 138.25, 214.17 144.37 C202 150.5, 187.32 154.92, 172.37 157.97 C157.42 161.02, 140.22 162.92, 124.44 162.66 C108.66 162.4, 92.15 160.55, 77.68 156.42 C63.22 152.29, 48.85 144.87, 37.66 137.88 C26.46 130.89, 16.7 123.22, 10.5 114.48 C4.3 105.74, 1.1 95.26, 0.44 85.46 C-0.22 75.66, 1.5 64.86, 6.53 55.67 C11.56 46.49, 20.59 37.83, 30.64 30.36 C40.68 22.89, 51.2 15.8, 66.8 10.86 C82.41 5.93, 112.38 2.41, 124.26 0.75 C136.15 -0.92, 137.86 -0.26, 138.1 0.85 M160.62 3.82 C175.68 4.97, 192.58 10.55, 205.87 16.07 C219.16 21.59, 231.75 28.8, 240.36 36.94 C248.96 45.08, 254.41 55.39, 257.48 64.92 C260.55 74.44, 260.74 84.74, 258.79 94.09 C256.84 103.43, 253.44 112.67, 245.78 120.97 C238.11 129.27, 225.22 137.75, 212.79 143.89 C200.36 150.04, 186.03 154.7, 171.19 157.82 C156.35 160.95, 139.57 163.16, 123.72 162.62 C107.88 162.09, 90.38 158.81, 76.14 154.63 C61.89 150.45, 49.02 144.37, 38.25 137.55 C27.48 130.73, 18.03 122.37, 11.54 113.68 C5.04 104.99, 0.12 95.17, -0.7 85.4 C-1.52 75.63, 1.49 64.41, 6.63 55.04 C11.76 45.68, 19.99 36.8, 30.12 29.22 C40.26 21.64, 53.52 14.42, 67.44 9.58 C81.36 4.74, 97.84 1.54, 113.66 0.19 C129.48 -1.16, 154.47 0.82, 162.37 1.49 C170.28 2.17, 161.49 3.01, 161.07 4.23" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(793.2777091673581 4113.941861288862) rotate(0 125.77861842345305 19.5)"><text x="125.77861842345305" y="27" font-family="Virgil, Segoe UI Emoji" font-size="30.230054213362088px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">MessageChannel</text></g><g stroke-linecap="round"><g transform="translate(1539.8340308747752 4087.9517613704634) rotate(0 409.0248114454157 -1.555704270189608)"><path d="M0 1 C136.63 0.49, 683 -3.31, 819.51 -4.11 M-1.46 0.47 C135.11 0.16, 682.31 -2.62, 818.96 -3.19" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1539.8340308747752 4087.9517613704634) rotate(0 409.0248114454157 -1.555704270189608)"><path d="M792.48 8.49 C796.71 4.88, 805.01 3.04, 820.32 -3.88 M789.82 8.18 C799.88 4.57, 806.61 1.5, 818.51 -3.26" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1539.8340308747752 4087.9517613704634) rotate(0 409.0248114454157 -1.555704270189608)"><path d="M792.39 -12.03 C796.46 -9.98, 804.79 -6.17, 820.32 -3.88 M789.73 -12.34 C799.66 -10.05, 806.42 -7.23, 818.51 -3.26" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g transform="translate(1628.8948083626572 4010.8341789941633) rotate(359.6562676618265 285.80480701202043 21.30678509858251)"><text x="0" y="31.613570197165025" font-family="Virgil, Segoe UI Emoji" font-size="29.388669101493097px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">下一个宏任务执行performSyncWorkOnRoot</text></g><g stroke-linecap="round" transform="translate(1062.711836984511 4118.4034275368485) rotate(0 189.44063244878794 47.36015811219704)"><path d="M-0.29 -0.23 C116 0.4, 233.2 -0.14, 378.95 -0.29 M-0.19 0.51 C147.87 -1.56, 296.14 -1.9, 379.4 -0.57 M380.02 0.14 C380.74 20.36, 378.72 39.34, 380.41 95.32 M379.38 0.66 C378.84 28.31, 377.91 55.53, 378.01 95.18 M377.8 94.96 C300.16 95.19, 218.82 94.69, -0.01 93.97 M379.35 94.85 C265.33 94.82, 153.09 95.49, 0.26 94.17 M0.85 95.33 C-2.44 70.55, -0.72 46.46, -0.34 -1.12 M0.35 95.46 C-0.35 71.92, 0.41 48.58, 0.22 0.39" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1067.711836984511 4146.263585649045) rotate(0 184.44063244878794 19.5)"><text x="184.44063244878794" y="27" font-family="Virgil, Segoe UI Emoji" font-size="30.200805313251813px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">performWorkUntilDeadline</text></g><g transform="translate(1007.5581989717168 2635.1071038384202) rotate(0 75.58209807223432 15.346618897915619)"><text x="0" y="22.693237795831223" font-family="Virgil, Segoe UI Emoji" font-size="21.48526645708184px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">根据执行上下文</text></g><g stroke-linecap="round" transform="translate(2500.980190293743 2305.879868689687) rotate(0 1126.2322358126892 1510.1680669330383)"><path d="M-0.42 0.77 C735.66 5.73, 1470.06 5.79, 2251.68 0.13 M-0.34 -0.36 C622.72 3.72, 1245.26 3.52, 2252.07 -0.32 M2252.38 -0.77 C2257.64 763.16, 2258.04 1526.02, 2251.67 3019.68 M2252.13 -0.38 C2250.73 726.33, 2250.79 1452.97, 2252.38 3020.01 M2251.68 3020.38 C1457.98 3027.09, 664.87 3027.01, 0.55 3019.73 M2252.17 3019.95 C1706.5 3011.89, 1159.92 3011.86, -0.39 3020.62 M0.39 3019.88 C5.36 2264.65, 5.84 1508.04, 0.13 -0.3 M0.17 3020.21 C-5.86 2081.95, -6.27 1144.4, 0.39 0.06" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2524.612921820635 2223.9460215001304) rotate(0 147.92957783694146 25.60319616408603)"><text x="0" y="36.20639232817206" font-family="Virgil, Segoe UI Emoji" font-size="39.827194033022714px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">renderRootSync</text></g><g transform="translate(3080.38602065618 2093.443099856262) rotate(0 444 38.5)"><text x="0" y="56" font-family="Virgil, Segoe UI Emoji" font-size="52.88531418312389px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">render阶段(concurrent模式下可中断)</text></g><g transform="translate(2622.410486892943 2358.357962952026) rotate(0 416.7631375598446 28.44799573787334)"><text x="0" y="41.89599147574669" font-family="Virgil, Segoe UI Emoji" font-size="39.827194033022714px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">performUnitOfWork(对fiber节点深度优先遍历)</text></g><g stroke-linecap="round" transform="translate(2632.476974655918 2458.139165639113) rotate(0 1007.8456501859757 1367.1883138365079)"><path d="M0.27 0.08 C424.65 4.95, 848.82 4.96, 2015.76 0.13 M0.34 0.29 C718.89 -0.88, 1437.48 -0.54, 2016.01 -0.21 M2016.3 -0.55 C2010.18 717.85, 2010.46 1437.29, 2015 2734.47 M2015.33 0.14 C2021.13 590.02, 2021.04 1180.22, 2015.32 2734.23 M2015.7 2734.08 C1250.48 2726.1, 487.15 2727.57, -0.65 2735.17 M2015.99 2734.2 C1392.57 2740.2, 768.9 2740.67, -0.14 2734.05 M-0.1 2733.68 C6.65 1715.03, 5.89 695.57, 0.22 -0.41 M-0.39 2734.27 C-9.96 1869.81, -10.19 1005.81, 0.29 0.38" stroke="#000000" stroke-width="1" fill="none"></path></g><g stroke-linecap="round" transform="translate(2698.6481799077533 3259.2161115237695) rotate(0 626.0836393921095 917.3679030759025)"><path d="M0.31 0.11 C490.17 1.11, 981.02 0.96, 1251.86 0.53 M-0.31 0.13 C473.85 -0.68, 947.57 -0.46, 1252.06 -0.33 M1251.39 0.27 C1254.84 564.16, 1254.52 1127.1, 1252.29 1834.68 M1252.1 0.01 C1259.57 594.72, 1259.33 1190.45, 1251.85 1834.46 M1252.33 1834.46 C979.03 1831.11, 705.25 1831.28, -0.09 1834.75 M1251.82 1835.04 C861.9 1831.24, 472.29 1830.87, 0.27 1834.47 M0.13 1835.47 C-6.33 1139.35, -5.73 444.87, 0.67 -0.56 M0.13 1834.9 C1.88 1460.1, 2.56 1085.95, 0.11 0.05" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2712.663021631449 3187.7684648619033) rotate(0 192.50037698823962 36.21958312670705)"><text x="0" y="26.219583126707057" font-family="Virgil, Segoe UI Emoji" font-size="26.713414166343664px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">beginWork(对fiber节点前序遍历)</text><text x="0" y="62.439166253414115" font-family="Virgil, Segoe UI Emoji" font-size="26.713414166343664px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr"></text></g><g stroke-linecap="round" transform="translate(4022.226016069511 3267.524271890809) rotate(0 275.5233579311823 257.18774381169203)"><path d="M-0.8 -0.54 C144.08 0.47, 288.66 1.26, 551.53 -0.08 M0.32 0.3 C195.37 0, 390.66 0.16, 550.7 -0.19 M550.81 -0.41 C552.85 184.43, 552.98 369.75, 551.52 515.02 M551.16 -0.32 C552.24 151.38, 552.39 302.32, 550.71 514.76 M550.94 515.07 C415.06 512.15, 278.23 512.97, -0.3 514.58 M551.38 514.42 C340.61 515.15, 130.59 515.28, -0.36 514.25 M-0.29 514.83 C0.08 358.27, -0.56 201.39, -0.23 -0.06 M-0.05 514.65 C1.48 322.08, 1.71 130.31, -0.38 0.25" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(4029.507048490568 3220.280388389479) rotate(0 183 16.5)"><text x="0" y="24" font-family="Virgil, Segoe UI Emoji" font-size="22.450147437349575px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">completeWork(对fiber节点后序遍历)</text></g><g stroke-linecap="round" transform="translate(2806.3187967142107 2543.40910669411) rotate(0 116.31133217376168 70.12538052872262)"><path d="M110.55 -0.25 C124.54 -1.92, 141.68 0.62, 155.44 3.63 C169.2 6.65, 182.24 11.74, 193.1 17.85 C203.95 23.96, 213.89 32.2, 220.56 40.29 C227.24 48.38, 232.18 57.63, 233.14 66.4 C234.09 75.17, 231.44 84.54, 226.28 92.92 C221.12 101.3, 212.08 110.09, 202.18 116.7 C192.28 123.3, 180.23 128.67, 166.86 132.56 C153.49 136.46, 136.92 139.31, 121.96 140.07 C107 140.83, 90.9 140.07, 77.12 137.11 C63.35 134.14, 50.33 128.46, 39.31 122.27 C28.3 116.09, 17.64 107.97, 11.03 100.01 C4.43 92.04, 0.48 83.43, -0.32 74.49 C-1.12 65.54, 1.31 54.71, 6.24 46.33 C11.17 37.95, 19.25 30.69, 29.26 24.21 C39.27 17.73, 51.52 11.56, 66.3 7.45 C81.09 3.35, 108.49 0.6, 117.99 -0.42 C127.49 -1.43, 123.38 0.16, 123.32 1.34 M79.62 2.1 C92.66 -1.83, 111.66 -1.92, 126.51 -0.86 C141.35 0.2, 155.76 4.06, 168.69 8.45 C181.63 12.84, 194.29 18.68, 204.11 25.49 C213.94 32.29, 223.2 41.14, 227.65 49.28 C232.09 57.41, 231.98 65.52, 230.77 74.28 C229.56 83.04, 227.06 93.68, 220.41 101.85 C213.76 110.01, 202.46 117.36, 190.89 123.26 C179.32 129.17, 164.95 134.65, 150.97 137.29 C136.99 139.93, 121.77 140.07, 107.02 139.09 C92.26 138.12, 75.7 135.26, 62.44 131.46 C49.17 127.66, 36.78 123.14, 27.43 116.29 C18.09 109.44, 10.64 99.19, 6.34 90.37 C2.04 81.55, 0.4 72.07, 1.62 63.39 C2.84 54.71, 7.34 46, 13.66 38.29 C19.98 30.57, 28.55 23.11, 39.52 17.09 C50.49 11.07, 72.7 4.39, 79.49 2.18 C86.29 -0.04, 79.39 2.59, 80.28 3.77" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2836.135997419335 2598.108692452337) rotate(0 90.30021281411814 31.169616605888507)"><text x="0" y="22.169616605888514" font-family="Virgil, Segoe UI Emoji" font-size="24.68510831410402px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">workInProgress</text><text x="0" y="53.33923321177703" font-family="Virgil, Segoe UI Emoji" font-size="24.68510831410402px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr"></text></g><g transform="translate(2711.1051135193384 2690.3937800438343) rotate(0 227.35485053706952 18.335068591699127)"><text x="0" y="26.670137183398275" font-family="Virgil, Segoe UI Emoji" font-size="25.669096028378814px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">全局变量，指向当前遍历/执行到的fiber</text></g><g transform="translate(2763.7347925928343 3318.510001825265) rotate(0 561 159)"><text x="0" y="29.75" font-family="Virgil, Segoe UI Emoji" font-size="28.62494144395361px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr"></text><text x="0" y="69.5" font-family="Virgil, Segoe UI Emoji" font-size="28.62494144395361px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">需要：</text><text x="0" y="109.25" font-family="Virgil, Segoe UI Emoji" font-size="28.62494144395361px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    1. 当fiber的props发生了变化，这里是fiber的props而非JSX(ReactElement)的props</text><text x="0" y="149" font-family="Virgil, Segoe UI Emoji" font-size="28.62494144395361px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    2. 当组件的调用了setState等方法导致fiber节点的lanes有更新标记</text><text x="0" y="188.75" font-family="Virgil, Segoe UI Emoji" font-size="28.62494144395361px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    3. 消费的context有更新</text><text x="0" y="228.5" font-family="Virgil, Segoe UI Emoji" font-size="28.62494144395361px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    4. 子fiber存在更新即childLanes有更新，会直接克隆子fiber结点，并</text><text x="0" y="268.25" font-family="Virgil, Segoe UI Emoji" font-size="28.62494144395361px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    继续向下执行beginWork，而不会生成子ReactElement元素</text><text x="0" y="308" font-family="Virgil, Segoe UI Emoji" font-size="28.62494144395361px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr"></text></g><g transform="translate(2732.7490804561785 3918.0782205814094) rotate(0 594 108.5)"><text x="0" y="32.4" font-family="Virgil, Segoe UI Emoji" font-size="30.923471597730863px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">如果需要向下更新，则生成子节点(子ReactElement元素)，分别对应函数组件的返回值</text><text x="0" y="75.8" font-family="Virgil, Segoe UI Emoji" font-size="30.923471597730863px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">及类组件render方法的返回值。子ReactElement元素转换为子fiber的过程就是diff的</text><text x="0" y="119.19999999999999" font-family="Virgil, Segoe UI Emoji" font-size="30.923471597730863px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">过程，在这个过程会给移动(包含新增)/删除的节点打上对应的Placement和Deletion</text><text x="0" y="162.6" font-family="Virgil, Segoe UI Emoji" font-size="30.923471597730863px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">标记</text><text x="0" y="206" font-family="Virgil, Segoe UI Emoji" font-size="30.923471597730863px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr"></text></g><g transform="translate(4049.0769281544135 3291.5153250354488) rotate(0 245 120)"><text x="0" y="30" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">对于HostComponet类型的fiber，</text><text x="0" y="70" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">如果不存在current，则说明是新增的。</text><text x="0" y="110" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">需要在这个阶段创建DOM实例，并将</text><text x="0" y="150" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">该节点下所有DOM实例插到自身DOM</text><text x="0" y="190" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">实例下，此时的DOM节点还没插入到</text><text x="0" y="230" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">文档中，是游离的DOM节点</text></g><g transform="translate(4049.744191622495 3568.77677203013) rotate(0 248.00000000000023 56.5)"><text x="0" y="27.666666666666664" font-family="Virgil, Segoe UI Emoji" font-size="26.128368766058003px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">将子节点的副作用链表拼接到父节点的</text><text x="0" y="65.33333333333333" font-family="Virgil, Segoe UI Emoji" font-size="26.128368766058003px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">副作用链表上，并且自身有副作用链表时，</text><text x="0" y="103" font-family="Virgil, Segoe UI Emoji" font-size="26.128368766058003px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">将自身插入到父节点副作用链表的尾部。</text></g><g stroke-linecap="round" transform="translate(2393.5028367084956 2007.2638454575977) rotate(0 2257.3518186430438 1715.5969399938854)"><path d="M0.8 0.17 C1209.85 -6.86, 2419.39 -7.69, 4515.43 -0.14 M0.26 -0.03 C1163.95 12.45, 2327.92 12.09, 4514.4 0.29 M4514.07 0.74 C4509.55 1034.53, 4510.26 2069.82, 4514.71 3430.91 M4515.03 -0.39 C4508.55 1351.63, 4508.84 2703.73, 4514.63 3430.8 M4514.76 3430.72 C3315.36 3439.43, 2115.58 3440.06, 0.07 3431.76 M4514.87 3431.19 C3104.93 3421.69, 1694.01 3421.32, -0.19 3431.31 M0.65 3430.86 C9.57 2503.09, 8.89 1574.82, 0.77 0.6 M0.17 3431.45 C-6.33 2138.04, -5.94 844.77, -0.26 0.29" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2408.0050457173675 1930.405368552296) rotate(0 225 25)"><text x="0" y="35" font-family="Virgil, Segoe UI Emoji" font-size="39.45693197686015px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">performSyncWorkOnRoot</text></g><g stroke-linecap="round" transform="translate(5256.311800598651 2383.8390299071725) rotate(0 785.9199343364266 1050.5987346672377)"><path d="M0.49 -0.53 C620.93 -5.94, 1241.08 -6.35, 1571.52 0.11 M0.09 0.15 C439.12 1.11, 878.54 0.86, 1571.96 0.02 M1571.5 -0.61 C1568.61 768.72, 1568.56 1538.93, 1572.06 2101.73 M1571.87 -0.05 C1565.11 633.63, 1564.36 1267.65, 1572.2 2100.95 M1572.37 2100.56 C1043.32 2100.79, 515.85 2100.99, 0.39 2101.21 M1571.45 2101.46 C1132.5 2101.73, 692.21 2102.45, -0.25 2101.06 M0.57 2101.9 C-1.35 1603.02, -1.14 1104.5, -0.46 -0.07 M-0.18 2101.05 C-7.72 1592.05, -7.5 1082.61, 0.15 -0.02" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(5789.057973453087 2130.0682955689344) rotate(0 233.49737039819684 34.12653875050568)"><text x="0" y="50.25307750101136" font-family="Virgil, Segoe UI Emoji" font-size="47.28085813203068px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">commit阶段(不可中断)</text></g><g transform="translate(5262.946369192206 2311.3719880846174) rotate(0 101.42864552164383 23.71059245960504)"><text x="0" y="33.42118491921008" font-family="Virgil, Segoe UI Emoji" font-size="36.88314382605229px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">commitRoot</text></g><g stroke-linecap="round"><g transform="translate(4836.522394127581 3001.8764309817716) rotate(0 146.66469181664115 -1.501986199501232)"><path d="M0.24 -0.25 C48.73 -0.33, 243.46 -0.67, 292.08 -1.1 M-1.09 -1.43 C47.69 -1.78, 245.17 -2.65, 294.42 -2.75" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(4836.522394127581 3001.8764309817716) rotate(0 146.66469181664115 -1.501986199501232)"><path d="M265.84 6.43 C278.94 2.05, 287.1 -1.07, 294.99 -4.19 M266.42 7.99 C274.79 5.3, 283.5 1.69, 294.99 -2.4" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(4836.522394127581 3001.8764309817716) rotate(0 146.66469181664115 -1.501986199501232)"><path d="M265.77 -14.09 C278.79 -10.37, 286.98 -5.4, 294.99 -4.19 M266.35 -12.53 C274.95 -9.2, 283.68 -6.78, 294.99 -2.4" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g transform="translate(5336.837427736946 2490.071856599944) rotate(0 399 28)"><text x="0" y="41" font-family="Virgil, Segoe UI Emoji" font-size="38.682026880374075px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">commitBeforeMutationEffects(DOM突变前)</text></g><g stroke-linecap="round" transform="translate(5331.073944013593 2571.8270937454413) rotate(0 726.6416228399694 98.47274199158545)"><path d="M-0.18 -0.04 C438.4 0.34, 875.27 -0.71, 1453.57 -0.69 M0.24 -0.37 C366.05 3.6, 731.2 3.61, 1452.96 0.27 M1451.54 -0.96 C1454.18 62.09, 1452.28 126.21, 1453.62 198.22 M1453.6 0.28 C1453.77 42.98, 1453.72 85.4, 1453.7 197.35 M1452.67 197.23 C1126.71 194.5, 801.06 194.49, -0.58 196.4 M1453.57 196.73 C951.64 193.43, 448.9 193.4, -0.18 197.17 M-1.01 198.15 C-1.1 142.48, -0.84 84.07, 1.46 -1.88 M-0.43 197.66 C-2.14 138.71, -2.27 79.63, 0.23 0.68" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(5359.045343056111 2598.471656596635) rotate(0 683.5 78.00000000000003)"><text x="0" y="28" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">1.执行类组件getSnapshotBeforeUpdate生命周期</text><text x="0" y="67" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr"></text><text x="0" y="106" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">2.调度函数组件useEffect的执行，注意这里是调度，不是执行，useEffect的执行是在下一个宏任务执行的。</text><text x="0" y="145" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">也就是在commit之后执行</text></g><g stroke-linecap="round" transform="translate(5320.965754357339 3138.6647990366237) rotate(0 726.6416228399694 240.30486008904347)"><path d="M-0.77 0 C431.58 5.27, 864.34 4.24, 1452.54 -0.71 M-0.12 -0.04 C403.23 4.82, 806.86 4.94, 1453.1 0.35 M1453.74 0.42 C1451.78 171.45, 1451.86 343.28, 1453.39 480.2 M1453.15 -0.32 C1451.61 122.64, 1451.56 245.8, 1453.25 480.24 M1453.04 480.19 C910.07 480.55, 365.52 480.88, 0.47 480.8 M1453.2 480.94 C930.2 481.79, 407.74 481.41, 0.3 480.69 M-0.68 479.78 C-1.91 340.68, -2.73 200.02, 0.83 0.3 M0.08 480.34 C-0.14 319.92, 0.44 159.01, 0.15 0.2" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(5332.077287387267 3080.2242395974754) rotate(0 264.6488109770985 23.113433273109024)"><text x="0" y="34.22686654621808" font-family="Virgil, Segoe UI Emoji" font-size="32.35880658235266px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">commitMutationEffects(DOM突变)</text></g><g transform="translate(5347.679611719509 3160.824493898774) rotate(0 590.5 238)"><text x="0" y="28.666666666666664" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">1. 插入：</text><text x="0" y="68.33333333333333" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    a. DOM节点的移动/插入</text><text x="0" y="108" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">2. 更新：</text><text x="0" y="147.66666666666666" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    a. 重置文本结点内容</text><text x="0" y="187.33333333333331" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    b. DOM节点属性更新</text><text x="0" y="227" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">3. 卸载：</text><text x="0" y="266.66666666666663" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    a. 分离ref引用</text><text x="0" y="306.3333333333333" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    b. useLayoutEffect的销毁函数</text><text x="0" y="346" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    c. 异步调度函数组件useEffect的销毁函数，这里是调度，不是执行，在下一个宏任务执行</text><text x="0" y="385.66666666666663" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    d. 类组件componentWillUnmount生命周期执行</text><text x="0" y="425.3333333333333" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    e. DOM节点的卸载</text><text x="0" y="465" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr"></text></g><g stroke-linecap="round"><g transform="translate(6052.701596744656 2865.962231580029) rotate(0 0.743517029549821 79.8427581567122)"><path d="M0.76 0.94 C1.15 27.51, 1.78 133.13, 1.79 159.29 M-0.3 0.4 C-0.02 26.66, 0.26 131.29, 0.84 157.73" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(6052.701596744656 2865.962231580029) rotate(0 0.743517029549821 79.8427581567122)"><path d="M-8.16 129.65 C-5.31 135.06, -4.98 141.86, 1.82 157.58 M-9.44 129.97 C-6.78 135.66, -5.23 142.91, 0.37 156.74" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(6052.701596744656 2865.962231580029) rotate(0 0.743517029549821 79.8427581567122)"><path d="M12.36 129.42 C10.02 135.02, 5.15 141.88, 1.82 157.58 M11.08 129.74 C8.76 135.49, 5.33 142.8, 0.37 156.74" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g transform="translate(5331.843045224218 3859.6650726837447) rotate(0 243.011568422276 24.608766422509007)"><text x="0" y="36.21753284501793" font-family="Virgil, Segoe UI Emoji" font-size="34.45227299151257px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">commitLayoutEffects(突变后)</text></g><g stroke-linecap="round" transform="translate(5333.070274843265 3932.85777101814) rotate(0 723.9349608239249 154.75207666740857)"><path d="M0.16 0.08 C554.13 -2.28, 1109.41 -1.89, 1448.02 -0.09 M0.39 -0.28 C554.27 -5.1, 1108.47 -4.84, 1447.92 -0.08 M1447.65 -0.43 C1448.99 95.59, 1446.64 193.13, 1447.21 308.77 M1448.03 -0.39 C1447.53 68, 1448.39 136.91, 1448.06 310.13 M1447.41 309.8 C1100.34 312.7, 754.05 313.23, -0.33 308.91 M1447.65 309.2 C1078.39 314.52, 708.53 314.6, 0.04 309.72 M-0.64 309.65 C-0.53 205.7, -2.72 101.91, -0.44 -0.37 M0.03 310.15 C-1.76 190.86, -1.56 73.73, 0.68 0.72" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(5371.604888606091 3963.005659372223) rotate(0 649.5 120)"><text x="0" y="30" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">1. 执行函数组件的useLayoutEffect的回调</text><text x="0" y="70" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">2. 收集函数组件的useEffect的创建和销毁函数。前面已经调度过了，现在是收集，用于下个阶段的执行</text><text x="0" y="110" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">3. 执行类组件的componentDidMount和componentDidUpdate</text><text x="0" y="150" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">4. 执行类组件的setState的第二个参数(回调函数)</text><text x="0" y="190" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">5. 执行DOM节点类型为表单节点且有autoFocus的props的focus行为</text><text x="0" y="230" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">6. 链接ref</text></g><g stroke-linecap="round"><g transform="translate(6055.95402382981 3656.3820624664686) rotate(0 -0.7802238040876546 102.93731787624722)"><path d="M0.51 0.4 C0.17 34.6, -1.92 170.84, -2.07 204.84 M-0.68 -0.43 C-0.63 33.99, 0.28 171.99, 0.29 206.31" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(6055.95402382981 3656.3820624664686) rotate(0 -0.7802238040876546 102.93731787624722)"><path d="M-9.41 177.03 C-7.29 188.2, -4.9 196.3, -0.22 207.29 M-10.92 178.84 C-7.49 188.61, -2.36 197.69, -0.28 205.54" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(6055.95402382981 3656.3820624664686) rotate(0 -0.7802238040876546 102.93731787624722)"><path d="M11.11 176.96 C7.12 188.23, 3.4 196.35, -0.22 207.29 M9.6 178.76 C5.77 188.73, 3.63 197.84, -0.28 205.54" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g transform="translate(1394.0640447997223 3357.7694178649012) rotate(0 410.0841554022579 23.98152955568753)"><text x="0" y="35.96305911137516" font-family="Virgil, Segoe UI Emoji" font-size="33.57414137796263px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">执行完performSyncWorkOnRoot后检测是否有新的更新</text></g><g transform="translate(4862.465265012277 3027.133708112664) rotate(0 114.5 38)"><text x="0" y="27" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">新fiber树构建完成</text><text x="0" y="65" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr"></text></g><g transform="translate(1667.9404571830619 2710.0933412092772) rotate(0 56.5 20)"><text x="0" y="30" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">同步执行</text></g><g transform="translate(2746.572102970875 4243.478745691002) rotate(0 281.5 147.5)"><text x="0" y="30.142857142857146" font-family="Virgil, Segoe UI Emoji" font-size="30.235226859310835px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">1. 挂载：</text><text x="0" y="72.28571428571429" font-family="Virgil, Segoe UI Emoji" font-size="30.235226859310835px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    a. 构造函数constructor</text><text x="0" y="114.42857142857144" font-family="Virgil, Segoe UI Emoji" font-size="30.235226859310835px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    b. getDerivedStateFromProps</text><text x="0" y="156.57142857142858" font-family="Virgil, Segoe UI Emoji" font-size="30.235226859310835px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    c. componentWillMount(废弃)</text><text x="0" y="198.71428571428572" font-family="Virgil, Segoe UI Emoji" font-size="30.235226859310835px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    d. 如果有componentDidMount,</text><text x="0" y="240.8571428571429" font-family="Virgil, Segoe UI Emoji" font-size="30.235226859310835px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">       则打上更新标记在commit阶段执行</text><text x="0" y="283" font-family="Virgil, Segoe UI Emoji" font-size="30.235226859310835px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    e. render</text></g><g transform="translate(2752.7467508581994 4575.773388633484) rotate(0 311 202.5)"><text x="0" y="29.5" font-family="Virgil, Segoe UI Emoji" font-size="29.383315276273027px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">2.更新：</text><text x="0" y="70" font-family="Virgil, Segoe UI Emoji" font-size="29.383315276273027px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    a. comopnentWillReceiveProps(废弃)</text><text x="0" y="110.5" font-family="Virgil, Segoe UI Emoji" font-size="29.383315276273027px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    b. getDerivedStateFromProps</text><text x="0" y="151" font-family="Virgil, Segoe UI Emoji" font-size="29.383315276273027px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    c. shoudComponentUpdate</text><text x="0" y="191.5" font-family="Virgil, Segoe UI Emoji" font-size="29.383315276273027px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    d. componentWillUpdate(废弃)</text><text x="0" y="232" font-family="Virgil, Segoe UI Emoji" font-size="29.383315276273027px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    e. 如果有getSnapshotBeforeUpdate，则</text><text x="0" y="272.5" font-family="Virgil, Segoe UI Emoji" font-size="29.383315276273027px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">       打上SnapShot标记在commit阶段执行</text><text x="0" y="313" font-family="Virgil, Segoe UI Emoji" font-size="29.383315276273027px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    f. 如果有componentDidUpdate，则打上</text><text x="0" y="353.5" font-family="Virgil, Segoe UI Emoji" font-size="29.383315276273027px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">       Update标记在commit阶段执行</text><text x="0" y="394" font-family="Virgil, Segoe UI Emoji" font-size="29.383315276273027px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    g. render</text></g><g stroke-linecap="round" transform="translate(2727.177167015321 4232.14347746242) rotate(0 333.3145539906102 399.0610328638496)"><path d="M0.18 -0.62 C210.49 0.43, 420.87 0.04, 666.5 0.6 M0.15 0.08 C144.57 -0.04, 289.57 -0.42, 666.6 0.27 M666.31 0.14 C664.03 258.88, 664.37 517.69, 666.8 797.4 M666.25 0.03 C667.75 263.63, 667.26 527.02, 666.4 798.44 M666.83 797.37 C410.68 797.7, 156.5 796.3, 0.14 798 M666.39 797.75 C408.22 798.62, 150.89 799.08, 0.21 798.31 M0.67 798.6 C3.29 562, 3.89 325.98, 0.1 -0.49 M0.36 798.42 C0.08 544.34, -0.53 290.35, 0.19 0.33" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2733.201580160861 4181.1683600915285) rotate(0 207 20)"><text x="0" y="30" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">类组件(下面生命周期有先后顺序)</text></g><g transform="translate(3454.3809228838654 4182.122350701857) rotate(0 56.5 20)"><text x="0" y="30" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">函数组件</text></g><g stroke-linecap="round" transform="translate(3448.6344440106263 4235.801693424862) rotate(0 235.0873239436621 397.2131455399061)"><path d="M-0.28 0.07 C143.55 -2.34, 287.41 -0.79, 469.41 -0.51 M0.03 0.3 C137.17 -1.24, 274.62 -0.96, 469.88 0.17 M470.45 0.1 C467.66 261.53, 467.9 525.05, 470.59 794.86 M470.33 -0.06 C470.24 266.29, 470.23 532.1, 469.81 794.31 M471.02 794.93 C328.26 792.61, 187.34 791.75, -0.15 794.58 M470.02 794.7 C337.93 794.24, 204.62 794.36, 0.11 794.76 M0.21 794.09 C-1.48 479.93, -0.84 166.31, -0.51 -0.1 M0.18 794.36 C-1.65 624.7, -1.31 454.2, -0.36 -0.37" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(3486.981861851002 4276.499815490591) rotate(0 211 258)"><text x="0" y="28.692307692307693" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">在执行函数组件前判断fiber节点</text><text x="0" y="68.38461538461539" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">是否存在current，没有的话则</text><text x="0" y="108.07692307692308" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">将全局函数组件执行器</text><text x="0" y="147.76923076923077" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">ReactCurrentDispatcher赋值</text><text x="0" y="187.46153846153845" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">成HooksDispatcherOnMount，</text><text x="0" y="227.15384615384616" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">否则赋值成</text><text x="0" y="266.84615384615387" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">HooksDispatcherOnUpdate，</text><text x="0" y="306.53846153846155" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">分别对应hook的挂载和更新逻辑。</text><text x="0" y="346.2307692307692" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr"></text><text x="0" y="385.9230769230769" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">在函数组件的执行过程中会调用</text><text x="0" y="425.61538461538464" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">hook，会对应给fiber打上对应的</text><text x="0" y="465.3076923076923" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">标记。如调用useEffect会打上</text><text x="0" y="505" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">Passive标记</text></g><g transform="translate(2759.0541056276957 3653.7651797251356) rotate(0 469.5 95.5)"><text x="0" y="28.200000000000003" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">不需要：</text><text x="0" y="66.4" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    1. 组件的lanes字段不存在更新且父组件没有触发重新渲染。所以会满足</text><text x="0" y="104.60000000000001" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    current.memoizedProps === workInProgress.pendingProps </text><text x="0" y="142.8" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">    2. 满足了函数组件的memo或者类组件的shouldComponentUpdate</text><text x="0" y="181" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">     </text></g><g transform="translate(2739.9887719843564 3284.855623807907) rotate(0 182.5 20)"><text x="0" y="30" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">判断组件是否需要向下更新：</text></g><g stroke-linecap="round" transform="translate(2731.636748058645 3335.7710588326327) rotate(0 588.8165542897002 260.95326668216705)"><path d="M0.57 -0.73 C464.28 -1.59, 928.01 -1.62, 1178.43 -0.53 M-0.15 0.22 C281.01 3.57, 562.4 3.98, 1177.56 -0.17 M1177.99 -0.17 C1175.94 208.05, 1176.04 415.85, 1178.26 522.38 M1177.73 0.3 C1179.1 157.88, 1179.32 315.48, 1177.35 522.24 M1177.47 522.53 C927.36 525.56, 675.75 525.96, -0.52 521.69 M1177.95 521.96 C715.47 525.38, 252.8 525.36, -0.11 522.14 M-0.58 522.65 C-1.87 387.93, -1.86 253.49, 0.78 -0.59 M0.34 521.97 C-0.31 403.92, -0.29 285.28, 0.2 -0.07" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(3235.7279130429465 2543.900018824465) rotate(0 678.9999999999998 279.5)"><text x="0" y="37.81818181818182" font-family="Virgil, Segoe UI Emoji" font-size="36.395499996084084px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">beginWork是向下生成fiber节点的过程，并且会根据fiber的状态添加不一样的flags。</text><text x="0" y="88.63636363636364" font-family="Virgil, Segoe UI Emoji" font-size="36.395499996084084px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr"></text><text x="0" y="139.45454545454547" font-family="Virgil, Segoe UI Emoji" font-size="36.395499996084084px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">completeWork则是生成子节点后回溯链接副作用的过程，会将遍历到的fiber节点的</text><text x="0" y="190.27272727272728" font-family="Virgil, Segoe UI Emoji" font-size="36.395499996084084px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">子节点的副作用链表拼接到父节点上，并且如果自身存在副作用的话，再将自身插入</text><text x="0" y="241.0909090909091" font-family="Virgil, Segoe UI Emoji" font-size="36.395499996084084px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">到父节点的副作用链表上。</text><text x="0" y="291.90909090909093" font-family="Virgil, Segoe UI Emoji" font-size="36.395499996084084px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr"></text><text x="0" y="342.72727272727275" font-family="Virgil, Segoe UI Emoji" font-size="36.395499996084084px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">其中有两个特例：</text><text x="0" y="393.54545454545456" font-family="Virgil, Segoe UI Emoji" font-size="36.395499996084084px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">1. beginWork对于删除(Deletion)的结点，会提前将其拼接到父节点的副作用链表上。</text><text x="0" y="444.3636363636364" font-family="Virgil, Segoe UI Emoji" font-size="36.395499996084084px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">2. completeWork对于不存在current的且tag为hostComponet的fiber节点，会创建</text><text x="0" y="495.1818181818182" font-family="Virgil, Segoe UI Emoji" font-size="36.395499996084084px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">DOM实例，并将该节点的子DOM实例节点都插入到当前DOM实例上，但这个阶段</text><text x="0" y="546" font-family="Virgil, Segoe UI Emoji" font-size="36.395499996084084px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">不会插入到文档中，是游离的DOM节点树，在commit阶段的时候插入。</text></g><g transform="translate(6107.0261434033555 3712.1884827390268) rotate(0 283.5 38)"><text x="0" y="27" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">第二阶段执行后root.current = finishedWork</text><text x="0" y="65" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr"> </text></g><g transform="translate(6090.961869885503 3756.530147378022) rotate(0 322.5 20)"><text x="0" y="30" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">此时fiber树的current变为之前的workInProgress树</text></g><g transform="translate(6110.491076511483 3810.9957097145516) rotate(0 312.5 20)"><text x="0" y="30" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">因为DOM已经突变完成，页面上对应的就是这棵树</text></g><g transform="translate(4817.015600428779 3080.5888361383677) rotate(0 186.5 40)"><text x="0" y="30" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">root.finishedWork指向render</text><text x="0" y="70" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">阶段构建的workInProgress树</text></g><g transform="translate(348.7581206667489 565.7824362442605) rotate(0 96.46523042634985 26.428830253794445)"><text x="0" y="37.85766050758899" font-family="Virgil, Segoe UI Emoji" font-size="41.39477340612133px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">FiberRoot</text></g><g stroke-linecap="round" transform="translate(1898.3403942767193 471.32225799820594) rotate(0 187.7789037055736 123.13666908286473)"><path d="M150.74 1.73 C167.25 -2.4, 186.98 -0.57, 205.25 0.57 C223.51 1.72, 243.1 3.76, 260.34 8.58 C277.58 13.4, 294.61 21.61, 308.7 29.49 C322.8 37.37, 334.99 45.81, 344.89 55.86 C354.8 65.91, 363.11 78.14, 368.15 89.79 C373.19 101.43, 375.4 113.82, 375.12 125.73 C374.85 137.64, 372.11 149.89, 366.52 161.26 C360.92 172.64, 352.24 184.14, 341.55 193.98 C330.85 203.83, 317.24 212.93, 302.33 220.34 C287.43 227.75, 269.61 234.02, 252.12 238.44 C234.64 242.86, 215.77 246.05, 197.43 246.85 C179.09 247.66, 159.78 246.22, 142.07 243.28 C124.36 240.33, 106.99 235.67, 91.18 229.18 C75.37 222.69, 59.75 213.65, 47.21 204.33 C34.68 195.01, 23.72 184.04, 15.96 173.25 C8.2 162.46, 2.95 151.39, 0.66 139.59 C-1.64 127.79, -1.27 114.6, 2.18 102.45 C5.62 90.29, 12.81 77.55, 21.34 66.65 C29.88 55.75, 40.85 45.69, 53.38 37.03 C65.9 28.38, 78.87 20.49, 96.49 14.73 C114.11 8.96, 147.26 4.46, 159.11 2.45 C170.96 0.44, 167.2 0.93, 167.6 2.66 M120.89 8.88 C135.87 2.9, 156.98 1.92, 175.56 0.82 C194.13 -0.27, 214.25 -0.6, 232.36 2.29 C250.47 5.18, 268.42 11.65, 284.21 18.19 C300 24.72, 314.75 32.52, 327.08 41.49 C339.42 50.46, 350.35 61.39, 358.23 72.01 C366.11 82.63, 371.94 93.53, 374.38 105.22 C376.82 116.92, 376 129.98, 372.85 142.18 C369.7 154.39, 363.71 167.48, 355.48 178.45 C347.25 189.42, 336.37 199.38, 323.48 208.02 C310.59 216.66, 294.15 224.14, 278.15 230.29 C262.15 236.45, 245.23 242.19, 227.46 244.93 C209.7 247.67, 189.77 247.82, 171.55 246.71 C153.32 245.6, 135.4 242.92, 118.13 238.26 C100.86 233.61, 82.61 226.73, 67.94 218.79 C53.27 210.85, 40.16 200.96, 30.11 190.6 C20.07 180.24, 12.51 168.24, 7.66 156.63 C2.82 145.02, 0.85 132.7, 1.03 120.93 C1.21 109.15, 3.21 97.28, 8.73 85.98 C14.26 74.69, 23.7 63.15, 34.16 53.14 C44.62 43.13, 56.89 33.54, 71.48 25.95 C86.07 18.35, 113.21 10.03, 121.68 7.56 C130.16 5.1, 121.44 8.99, 122.31 11.16" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1929.2903824186571 574.1633525829902) rotate(0 166.50163059890542 26.428830253794445)"><text x="0" y="37.85766050758899" font-family="Virgil, Segoe UI Emoji" font-size="41.39477340612133px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">fiber of &lt;App /&gt;</text></g><g transform="translate(755.9568200752303 484.77488746823747) rotate(0 93.82234740097039 33.03603781724314)"><text x="0" y="45.072075634486254" font-family="Virgil, Segoe UI Emoji" font-size="52.85766050758899px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">current</text></g><g stroke-linecap="round" transform="translate(1122.8189279360224 466.1591014882358) rotate(0 187.7789037055736 123.13666908286473)"><path d="M267.51 11.94 C284.64 15.26, 299.36 24.74, 313.18 32.79 C326.99 40.84, 340.89 49.99, 350.41 60.24 C359.94 70.5, 366.13 82.57, 370.34 94.31 C374.54 106.05, 376.81 118.49, 375.63 130.68 C374.45 142.87, 370.02 155.93, 363.27 167.45 C356.53 178.97, 346.61 190.24, 335.15 199.79 C323.69 209.35, 309.65 218.07, 294.51 224.75 C279.37 231.43, 261.81 236.35, 244.31 239.86 C226.8 243.37, 207.68 245.63, 189.47 245.83 C171.26 246.04, 152.57 244.35, 135.04 241.09 C117.51 237.83, 99.65 233.02, 84.3 226.28 C68.94 219.54, 54.78 210.3, 42.9 200.64 C31.03 190.99, 20.25 179.67, 13.05 168.34 C5.86 157.02, 1.06 144.7, -0.29 132.71 C-1.64 120.72, 0.84 107.93, 4.96 96.42 C9.07 84.91, 15.6 74.02, 24.42 63.66 C33.25 53.3, 44.63 42.9, 57.91 34.27 C71.19 25.64, 87.52 17.24, 104.1 11.91 C120.68 6.57, 138.93 4.03, 157.38 2.27 C175.83 0.5, 195.76 -0.49, 214.79 1.34 C233.81 3.16, 261.67 10.77, 271.53 13.22 C281.38 15.68, 275.07 14.15, 273.91 16.09 M137.72 4.71 C153.42 -0.09, 172.98 -0.02, 191.46 0.24 C209.93 0.5, 230.75 2.42, 248.57 6.27 C266.38 10.12, 283.4 16.15, 298.35 23.34 C313.3 30.53, 327.5 39.82, 338.28 49.43 C349.05 59.03, 356.98 69.73, 362.98 80.96 C368.98 92.2, 373.1 104.75, 374.27 116.85 C375.44 128.95, 374.41 141.99, 369.99 153.56 C365.56 165.14, 357.48 175.88, 347.74 186.31 C337.99 196.73, 325.11 207.83, 311.51 216.1 C297.92 224.38, 282.8 230.82, 266.18 235.94 C249.57 241.06, 230.19 245.51, 211.85 246.81 C193.51 248.11, 174.37 246.26, 156.14 243.73 C137.9 241.2, 119.11 237.06, 102.43 231.65 C85.76 226.24, 69.55 219.42, 56.09 211.3 C42.63 203.17, 30.48 193.64, 21.68 182.92 C12.87 172.2, 6.57 159.01, 3.26 146.98 C-0.06 134.94, -0.27 122.92, 1.8 110.73 C3.86 98.54, 8.58 84.97, 15.66 73.83 C22.73 62.68, 32.56 53.01, 44.25 43.86 C55.93 34.7, 70.12 25.69, 85.76 18.91 C101.41 12.12, 129.18 5.4, 138.1 3.16 C147.02 0.92, 138.7 3.41, 139.28 5.46" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1180.2168194871026 569.9069169476295) rotate(0 142.71568337049018 26.428830253794445)"><text x="0" y="37.85766050758899" font-family="Virgil, Segoe UI Emoji" font-size="41.39477340612133px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">HostRootFiber</text></g><g stroke-linecap="round"><g transform="translate(656.5401010103985 586.3469369071931) rotate(0 217.4175514085349 0.006027748125916332)"><path d="M1.05 -0.97 C73.14 -1.03, 360.26 -0.96, 432.3 -1.17 M0.15 1.13 C72.66 1.36, 362.6 0.81, 434.69 0.37" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(656.5401010103985 586.3469369071931) rotate(0 217.4175514085349 0.006027748125916332)"><path d="M404.92 9.72 C414.49 8.17, 420.54 6.26, 436.67 -0.09 M406.14 10.73 C415.3 6.93, 423.92 3.89, 435.28 -0.29" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(656.5401010103985 586.3469369071931) rotate(0 217.4175514085349 0.006027748125916332)"><path d="M404.84 -10.8 C414.29 -6.62, 420.36 -2.8, 436.67 -0.09 M406.07 -9.79 C415.21 -7.59, 423.85 -4.62, 435.28 -0.29" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g transform="translate(1601.486058185815 508.9971881431786) rotate(0 55.500543532968436 33.03603781724314)"><text x="0" y="45.072075634486254" font-family="Virgil, Segoe UI Emoji" font-size="52.85766050758897px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">child</text></g><g stroke-linecap="round"><g transform="translate(1515.9170410267204 609.4267802010731) rotate(0 186.5611345764479 -1.7132774930732921)"><path d="M-0.61 0.01 C61.5 -0.4, 311.24 -3.24, 373.73 -3.43 M1.27 -1.03 C63.17 -1.25, 310.84 -2.16, 372.97 -2.46" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1515.9170410267204 609.4267802010731) rotate(0 186.5611345764479 -1.7132774930732921)"><path d="M344.83 8.5 C354.01 5.59, 368.71 -0.45, 372.82 -2.85 M345.32 7.27 C355.48 3.68, 364.94 0.06, 372.4 -2.71" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1515.9170410267204 609.4267802010731) rotate(0 186.5611345764479 -1.7132774930732921)"><path d="M344.75 -12.03 C353.8 -6.97, 368.52 -5.06, 372.82 -2.85 M345.24 -13.25 C355.35 -9.74, 364.83 -6.25, 372.4 -2.71" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g stroke-linecap="round" transform="translate(1926.591969714412 1101.4903273545954) rotate(0 187.7789037055736 123.13666908286478)"><path d="M105.84 12.2 C120.16 5.34, 141.13 3.67, 159.34 1.86 C177.56 0.05, 196.75 -0.26, 215.12 1.35 C233.48 2.95, 252.68 6.35, 269.53 11.48 C286.37 16.61, 302.63 23.9, 316.19 32.11 C329.75 40.32, 341.86 50.22, 350.86 60.76 C359.87 71.29, 366.27 83.3, 370.23 95.33 C374.19 107.36, 375.89 120.71, 374.62 132.93 C373.34 145.15, 369.12 157.4, 362.59 168.66 C356.06 179.92, 346.96 191.25, 335.45 200.5 C323.93 209.75, 309.02 217.59, 293.52 224.14 C278.01 230.69, 260.15 235.99, 242.42 239.79 C224.69 243.59, 205.53 246.73, 187.15 246.94 C168.76 247.16, 149.45 244.86, 132.13 241.08 C114.8 237.29, 98.28 231.15, 83.21 224.24 C68.13 217.32, 53.49 208.99, 41.66 199.58 C29.83 190.17, 18.97 178.81, 12.23 167.78 C5.49 156.76, 2.48 145.51, 1.24 133.44 C0 121.37, 0.81 107.46, 4.8 95.36 C8.78 83.25, 16.09 71.06, 25.15 60.82 C34.21 50.58, 43.44 42.69, 59.15 33.9 C74.86 25.12, 107.04 12.52, 119.41 8.11 C131.77 3.69, 132.27 5.38, 133.36 7.4 M114.14 10.61 C129.09 4.29, 150.16 2.93, 168.63 1.34 C187.1 -0.26, 206.93 -1.02, 224.97 1.04 C243.02 3.11, 260.82 7.73, 276.91 13.76 C293 19.78, 308.59 28.39, 321.52 37.18 C334.46 45.97, 346.21 55.82, 354.53 66.47 C362.85 77.11, 368.09 88.87, 371.45 101.03 C374.82 113.19, 376.69 127.22, 374.72 139.44 C372.76 151.67, 367.06 163.36, 359.68 174.37 C352.3 185.38, 342.78 196.48, 330.42 205.51 C318.06 214.53, 301.65 222.44, 285.52 228.52 C269.4 234.59, 251.4 239.19, 233.66 241.95 C215.92 244.7, 197.18 245.61, 179.08 245.05 C160.99 244.48, 142.54 242.33, 125.09 238.55 C107.65 234.77, 89.33 229.42, 74.42 222.36 C59.51 215.29, 46.6 206.06, 35.63 196.15 C24.66 186.24, 14.53 174.53, 8.6 162.89 C2.67 151.24, 0.45 138.23, 0.04 126.27 C-0.36 114.3, 1.43 102.53, 6.15 91.12 C10.86 79.71, 18.5 68.23, 28.33 57.79 C38.17 47.36, 51 36.34, 65.17 28.5 C79.35 20.65, 104.87 13.62, 113.39 10.72 C121.91 7.81, 114.71 9.28, 116.29 11.07" stroke="#000000" stroke-width="1" fill="none"></path></g><g stroke-linecap="round" transform="translate(1119.444352018708 1092.323541811629) rotate(0 187.7789037055736 123.13666908286478)"><path d="M259.08 9.05 C276.34 11.57, 293.38 19.89, 307.63 27.7 C321.89 35.51, 334.62 45.59, 344.59 55.9 C354.55 66.22, 362.38 77.96, 367.43 89.59 C372.48 101.22, 375.18 113.83, 374.89 125.68 C374.59 137.54, 371.3 149.4, 365.65 160.73 C360 172.06, 351.39 183.71, 340.99 193.67 C330.59 203.64, 317.72 212.96, 303.27 220.54 C288.82 228.12, 271.58 234.94, 254.29 239.16 C237.01 243.37, 218.2 245.37, 199.56 245.8 C180.92 246.24, 160.65 244.76, 142.45 241.78 C124.25 238.79, 105.96 234.04, 90.35 227.89 C74.74 221.75, 60.92 213.58, 48.79 204.9 C36.65 196.21, 25.52 186.59, 17.55 175.79 C9.57 164.99, 3.52 152.38, 0.94 140.09 C-1.63 127.79, -0.98 113.92, 2.1 102.01 C5.18 90.1, 10.91 79.3, 19.41 68.65 C27.91 58, 40.35 46.94, 53.11 38.11 C65.86 29.27, 80.12 21.68, 95.94 15.65 C111.75 9.63, 129.72 4.34, 148.01 1.95 C166.3 -0.45, 186.69 -0.21, 205.7 1.28 C224.71 2.77, 252.37 8.78, 262.07 10.87 C271.77 12.97, 265.04 12.21, 263.9 13.85 M201.06 0.38 C218.73 -0.7, 238.75 4.4, 255.63 8.68 C272.5 12.96, 288.09 18.72, 302.32 26.05 C316.54 33.38, 330.2 42.69, 340.99 52.65 C351.77 62.6, 361.3 74.4, 367.04 85.78 C372.77 97.17, 375.34 108.76, 375.38 120.97 C375.43 133.17, 372.34 147.15, 367.3 159.01 C362.27 170.88, 355.21 181.96, 345.16 192.17 C335.1 202.38, 321.35 212.82, 306.99 220.25 C292.63 227.68, 276.18 232.64, 258.99 236.74 C241.8 240.84, 222.51 243.72, 203.86 244.85 C185.21 245.98, 165.37 245.77, 147.08 243.51 C128.79 241.25, 110.2 237.34, 94.14 231.29 C78.09 225.24, 63.1 216.18, 50.76 207.2 C38.42 198.23, 28.05 188.47, 20.12 177.46 C12.19 166.45, 6.18 153.09, 3.17 141.14 C0.16 129.19, -0.35 117.63, 2.06 105.76 C4.47 93.89, 9.62 81.08, 17.62 69.91 C25.62 58.73, 37.38 47.79, 50.06 38.73 C62.74 29.66, 78.06 21.59, 93.7 15.53 C109.35 9.48, 126.03 4.85, 143.94 2.39 C161.85 -0.08, 191.99 0.52, 201.17 0.77 C210.35 1.02, 199.31 1.7, 199 3.9" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1172.2720632585258 1198.0983518443338) rotate(0 141.39424185780058 26.4288302537945)"><text x="0" y="37.85766050758899" font-family="Virgil, Segoe UI Emoji" font-size="41.39477340612133px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">hostRootFiber</text></g><g transform="translate(1621.5037550462073 1147.0843853667266) rotate(0 55.500543532968436 33.03603781724314)"><text x="0" y="45.072075634486254" font-family="Virgil, Segoe UI Emoji" font-size="52.85766050758897px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">child</text></g><g stroke-linecap="round"><g transform="translate(1513.3138418211258 1242.073420733063) rotate(0 203.07142609347386 -1.8715994602846422)"><path d="M1.19 -0.28 C69 -1.01, 338.25 -2.9, 405.79 -3.47 M0.35 -1.47 C68.09 -2.1, 337.2 -1.86, 404.8 -2.05" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1513.3138418211258 1242.073420733063) rotate(0 203.07142609347386 -1.8715994602846422)"><path d="M376.16 8.09 C382.07 6.72, 387.59 3.63, 405.81 -3.33 M375.95 7.67 C387.38 3.64, 399.31 0.01, 405.49 -1.36" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1513.3138418211258 1242.073420733063) rotate(0 203.07142609347386 -1.8715994602846422)"><path d="M376.14 -12.43 C382.21 -9.49, 387.74 -8.27, 405.81 -3.33 M375.93 -12.85 C387.23 -8.92, 399.17 -4.59, 405.49 -1.36" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g stroke-linecap="round"><g transform="translate(1304.8876454603976 743.6840749630383) rotate(0 -3.369930838404116 154.41679894410515)"><path d="M-0.28 -0.09 C-1.67 51.38, -6.21 258.42, -7.45 310.01 M1.78 -1.18 C0.12 50.44, -6.77 256.19, -8.52 308.18" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1304.8876454603976 743.6840749630383) rotate(0 -3.369930838404116 154.41679894410515)"><path d="M-17.98 279.28 C-13.11 289.68, -10.52 302.26, -9.8 309.94 M-18.39 279.42 C-15.91 287.2, -13.36 293.84, -7.83 308.9" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1304.8876454603976 743.6840749630383) rotate(0 -3.369930838404116 154.41679894410515)"><path d="M2.53 279.96 C-0.36 290.06, -5.52 302.38, -9.8 309.94 M2.12 280.11 C-0.23 287.58, -2.51 294.07, -7.83 308.9" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g transform="translate(1371.6846494658296 889.980035413209) rotate(0 125.53694370552387 33.03603781724314)"><text x="0" y="45.072075634486254" font-family="Virgil, Segoe UI Emoji" font-size="52.85766050758899px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">alternate</text></g><g stroke-linecap="round"><g transform="translate(2064.395094133378 741.1051329254012) rotate(0 -1.727037018980127 158.5550176112647)"><path d="M-0.23 0.55 C-0.52 53.2, -1.91 263.37, -2.03 315.78 M-1.81 -0.2 C-2.28 52.65, -3.29 264.62, -3.22 317.31" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2064.395094133378 741.1051329254012) rotate(0 -1.727037018980127 158.5550176112647)"><path d="M-12.5 288.31 C-10.62 297.95, -9.07 306.51, -4.51 318.5 M-13.85 289.86 C-11.28 296.4, -8.12 303.01, -3.48 316.67" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2064.395094133378 741.1051329254012) rotate(0 -1.727037018980127 158.5550176112647)"><path d="M8.03 288.36 C4.22 297.94, 0.08 306.49, -4.51 318.5 M6.67 289.9 C4.46 296.39, 2.82 302.99, -3.48 316.67" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g transform="translate(2155.663947813182 893.5870785514276) rotate(0 125.53694370552375 33.03603781724314)"><text x="0" y="45.072075634486254" font-family="Virgil, Segoe UI Emoji" font-size="52.85766050758899px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">alternate</text></g><g transform="translate(1956.8077146844892 1206.5950926984117) rotate(0 166.50163059890542 26.4288302537945)"><text x="0" y="37.85766050758899" font-family="Virgil, Segoe UI Emoji" font-size="41.39477340612133px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">fiber of &lt;App /&gt;</text></g><g stroke-linecap="round"><g transform="translate(1340.6527046366457 1049.5012004539149) rotate(0 4.174824318635615 -153.5092965110964)"><path d="M-0.77 1.06 C0.37 -50.1, 5.55 -254.86, 6.81 -306.33 M1.03 0.56 C2.55 -50.99, 7.75 -256.86, 9.12 -308.07" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1340.6527046366457 1049.5012004539149) rotate(0 4.174824318635615 -153.5092965110964)"><path d="M20.4 -280.92 C16.83 -289.55, 11.67 -297.22, 8.25 -306.56 M19.37 -279.88 C15.02 -288.83, 11.92 -297.07, 9.79 -308.63" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(1340.6527046366457 1049.5012004539149) rotate(0 4.174824318635615 -153.5092965110964)"><path d="M-0.11 -281.45 C2.47 -289.79, 3.45 -297.3, 8.25 -306.56 M-1.15 -280.42 C0.5 -289.35, 3.39 -297.43, 9.79 -308.63" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g stroke-linecap="round"><g transform="translate(2117.8101300305634 1053.749335279566) rotate(0 -2.8412751039708155 -160.85478894380356)"><path d="M1.06 -0.78 C-0.07 -54.5, -4.73 -269.5, -6.16 -323.14 M0.15 1.43 C-1.13 -52.1, -5.27 -268.21, -6.74 -322.02" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2117.8101300305634 1053.749335279566) rotate(0 -2.8412751039708155 -160.85478894380356)"><path d="M2.87 -292.89 C-0.81 -304.9, -3.79 -314.45, -5.22 -322.18 M3.9 -294.72 C-1.02 -305.28, -4.98 -313.97, -7.29 -321.8" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2117.8101300305634 1053.749335279566) rotate(0 -2.8412751039708155 -160.85478894380356)"><path d="M-17.65 -292.42 C-14.13 -304.78, -9.91 -314.49, -5.22 -322.18 M-16.61 -294.25 C-13.96 -305.14, -10.34 -314, -7.29 -321.8" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g stroke-linecap="round"><g transform="translate(2299.691929313579 590.8323721748266) rotate(0 123.04488295848569 1.6503055822688566)"><path d="M-0.8 -0.67 C40.48 -0.34, 205.41 2.08, 246.89 2.71 M0.98 1.59 C42.14 2.02, 204.65 3.5, 245.79 3.97" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2299.691929313579 590.8323721748266) rotate(0 123.04488295848569 1.6503055822688566)"><path d="M216.37 13.47 C223.22 13.31, 230.6 10.83, 247.18 5.42 M216.53 13.06 C225.99 10.93, 233.31 9.74, 245.05 4.51" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2299.691929313579 590.8323721748266) rotate(0 123.04488295848569 1.6503055822688566)"><path d="M216.58 -7.05 C223.51 -2.39, 230.83 -0.03, 247.18 5.42 M216.74 -7.46 C226.01 -3.96, 233.27 0.48, 245.05 4.51" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g transform="translate(2340.676185707017 479.84727007061497) rotate(0 55.50054353296832 33.03603781724314)"><text x="0" y="45.072075634486254" font-family="Virgil, Segoe UI Emoji" font-size="52.85766050758897px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">child</text></g><g transform="translate(2617.1406194667734 556.5079530326411) rotate(0 22.46450571572541 33.03603781724314)"><text x="0" y="45.072075634486254" font-family="Virgil, Segoe UI Emoji" font-size="52.85766050758899px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">...</text></g><g stroke-linecap="round"><g transform="translate(2352.1385727761253 1240.1168172028554) rotate(0 123.28008565689538 2.204353227468914)"><path d="M-0.52 0.91 C40.77 1.64, 205.66 3.54, 247.08 4.07 M1.4 0.34 C42.59 0.76, 205.04 2.07, 246.09 2.38" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2352.1385727761253 1240.1168172028554) rotate(0 123.28008565689538 2.204353227468914)"><path d="M219.33 12.26 C226.12 11.48, 233.07 7.14, 244.8 0.47 M217.26 12.64 C224.65 9.45, 229.94 7.68, 245.24 1.88" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2352.1385727761253 1240.1168172028554) rotate(0 123.28008565689538 2.204353227468914)"><path d="M219.49 -8.26 C226.19 -4.03, 233.1 -3.38, 244.8 0.47 M217.42 -7.88 C224.59 -6.89, 229.85 -4.49, 245.24 1.88" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g transform="translate(2389.5971410513557 1145.5800773799272) rotate(0 55.50054353296832 33.03603781724314)"><text x="0" y="45.072075634486254" font-family="Virgil, Segoe UI Emoji" font-size="52.85766050758897px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">child</text></g><g transform="translate(2654.5920589335747 1200.334110916119) rotate(0 22.46450571572541 33.03603781724314)"><text x="0" y="45.072075634486254" font-family="Virgil, Segoe UI Emoji" font-size="52.85766050758899px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">...</text></g><g stroke-linecap="round" transform="translate(1094.4018638596979 445.36656583765875) rotate(0 876.9332485390398 148.0776190931034)"><path d="M0.56 0.58 C658.91 -5.38, 1317.47 -5.64, 1753.15 0.53 M-0.29 0.21 C429.13 -7.29, 858.43 -6.68, 1754.24 0.06 M1752.8 1.35 C1755.27 71.87, 1755.12 144.48, 1754.46 296.3 M1753.78 0.39 C1754.21 65.38, 1754.42 129.43, 1753.78 295.63 M1753.78 295.54 C1261.06 296.04, 769.37 296.01, 0.49 296.94 M1753.6 296.04 C1091.33 298.21, 429.01 298.39, -0.11 296.38 M0.18 296.13 C-1.52 206.89, -0.25 117.66, 1.14 -1.46 M0.24 295.66 C1.94 218.28, 2.05 140.7, 0.62 0.17" stroke="#000000" stroke-width="1" fill="none"></path></g><g stroke-linecap="round" transform="translate(1098.9342740857458 1078.5568644432353) rotate(0 887.1815316612428 156.89063897706149)"><path d="M0.58 -0.2 C517.73 -5.69, 1035.72 -5.64, 1774.9 -0.44 M0.21 -0.19 C571.45 5.02, 1143.85 5.59, 1774.42 -0.22 M1775.66 1.1 C1771.59 98.86, 1771.52 196.39, 1774.5 312.64 M1774.74 0.05 C1775.86 98.56, 1774.91 196.53, 1773.86 313.65 M1773.75 313.59 C1208.69 313.72, 642.71 313.48, 0.79 314.4 M1774.25 313.81 C1318.47 309.31, 863.04 308.93, 0.22 313.78 M-0.03 313.49 C1.33 203.11, 0.69 91.67, -1.4 -0.52 M-0.48 314.33 C-1.2 239.81, -0.79 165.11, 0.16 0.71" stroke="#000000" stroke-width="1" fill="none"></path></g><g stroke-linecap="round"><g transform="translate(2893.7226057632506 96.45317274341824) rotate(0 -94.18904492890056 128.99569520552245)"><path d="M0.87 -0.31 C-30.81 42.65, -157.49 215.41, -189.24 258.57 M-0.14 -1.51 C-31.51 41.47, -155.74 216.02, -186.94 259.5" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2893.7226057632506 96.45317274341824) rotate(0 -94.18904492890056 128.99569520552245)"><path d="M-179.41 229.32 C-183.58 239.4, -186.42 253.35, -188.04 259.95 M-179.36 229.76 C-182.82 242.88, -184.59 253.86, -187.48 259.63" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2893.7226057632506 96.45317274341824) rotate(0 -94.18904492890056 128.99569520552245)"><path d="M-162.71 241.25 C-173.13 247.05, -182.14 256.59, -188.04 259.95 M-162.67 241.69 C-172.7 250.13, -181.14 256.36, -187.48 259.63" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g transform="translate(2964.8268439173216 10) rotate(0 93.82234740097033 33.03603781724314)"><text x="0" y="45.072075634486254" font-family="Virgil, Segoe UI Emoji" font-size="52.85766050758899px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">current</text></g><g stroke-linecap="round"><g transform="translate(2978.0445365744044 885.7657892499649) rotate(0 -111.63482979828154 87.26932514070279)"><path d="M-0.77 -1.15 C-38.3 28.02, -187.37 145.33, -224.29 174.71 M1.02 0.86 C-36.23 30.17, -184.91 146.48, -222.19 175.69" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2978.0445365744044 885.7657892499649) rotate(0 -111.63482979828154 87.26932514070279)"><path d="M-208.23 148.3 C-214.07 160.94, -219.3 169.52, -220.21 174.22 M-206.82 150.93 C-211.11 159.23, -218.19 168.2, -223.08 174.97" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2978.0445365744044 885.7657892499649) rotate(0 -111.63482979828154 87.26932514070279)"><path d="M-195.58 164.46 C-206.09 171, -216.03 173.57, -220.21 174.22 M-194.17 167.08 C-202.85 169.58, -214.4 172.84, -223.08 174.97" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g transform="translate(3023.7733569126076 848.0552408223812) rotate(0 194.25190236538947 33.03603781724314)"><text x="0" y="45.072075634486254" font-family="Virgil, Segoe UI Emoji" font-size="52.85766050758897px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">workInProgress</text></g><g stroke-linecap="round" transform="translate(253.7791822332885 455.51485250904534) rotate(0 187.7789037055736 123.13666908286473)"><path d="M131.29 6.58 C147.26 1.46, 168.65 0.81, 187.04 0.67 C205.44 0.53, 223.85 2.17, 241.67 5.75 C259.48 9.33, 278.47 15.29, 293.94 22.13 C309.41 28.97, 323.04 37.46, 334.49 46.78 C345.95 56.1, 355.87 66.78, 362.65 78.05 C369.43 89.32, 373.8 102.53, 375.19 114.39 C376.58 126.25, 374.93 137.66, 371 149.21 C367.07 160.76, 360.85 172.95, 351.63 183.7 C342.4 194.44, 329.43 205.21, 315.67 213.66 C301.91 222.1, 285.47 229.09, 269.07 234.38 C252.67 239.67, 235.23 243.59, 217.26 245.4 C199.29 247.21, 179.52 247.13, 161.24 245.23 C142.97 243.34, 124.4 239.22, 107.62 234.04 C90.83 228.86, 74.19 222.39, 60.55 214.15 C46.92 205.91, 35.11 195.05, 25.83 184.6 C16.55 174.15, 9.02 163.19, 4.88 151.46 C0.74 139.74, -0.45 126.47, 0.99 114.24 C2.43 102.02, 6.96 89.46, 13.52 78.14 C20.08 66.82, 28.88 55.64, 40.36 46.33 C51.85 37.01, 63.16 29.6, 82.44 22.23 C101.72 14.86, 139.79 5.35, 156.04 2.09 C172.3 -1.16, 179.37 0.72, 179.98 2.69 M232.19 2.42 C249.73 3.08, 268.27 11.33, 283.93 17.79 C299.6 24.26, 313.89 32.18, 326.16 41.2 C338.44 50.23, 349.54 61, 357.61 71.93 C365.69 82.86, 372.18 94.77, 374.61 106.8 C377.04 118.82, 375.62 132.13, 372.2 144.07 C368.78 156.01, 362.04 167.79, 354.07 178.41 C346.11 189.03, 336.83 198.95, 324.42 207.79 C312.02 216.64, 295.9 225.3, 279.65 231.47 C263.4 237.64, 245.25 242.36, 226.94 244.82 C208.63 247.29, 188.04 247.41, 169.77 246.25 C151.51 245.08, 134.48 242.7, 117.34 237.85 C100.21 233.01, 81.27 225.2, 66.96 217.19 C52.65 209.18, 41.52 199.71, 31.48 189.8 C21.44 179.89, 12.13 169.37, 6.73 157.74 C1.34 146.11, -1.13 132.14, -0.88 120.01 C-0.63 107.88, 2.47 96.18, 8.23 84.95 C13.99 73.73, 22.88 62.77, 33.66 52.64 C44.44 42.52, 58.11 31.61, 72.9 24.22 C87.69 16.83, 105.27 12.27, 122.4 8.31 C139.54 4.35, 157.16 1.07, 175.71 0.46 C194.26 -0.14, 224.29 3.53, 233.71 4.68 C243.13 5.84, 233.15 5.38, 232.24 7.39" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(3662.596816991264 330.5032692011803) rotate(0 1541 565.5)"><text x="0" y="73.81818181818181" font-family="Virgil, Segoe UI Emoji" font-size="74.61159715157676px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">React采用双缓冲技术，在React初次挂载后的每次渲染，</text><text x="0" y="176.63636363636363" font-family="Virgil, Segoe UI Emoji" font-size="74.61159715157676px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">内存中都会存在两棵fiber树，每棵fiber树都以hostRootFiber为根。</text><text x="0" y="279.45454545454544" font-family="Virgil, Segoe UI Emoji" font-size="74.61159715157676px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr"></text><text x="0" y="382.27272727272725" font-family="Virgil, Segoe UI Emoji" font-size="74.61159715157676px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">current树指的是fiberRoot.current指向的fiber树，它对应屏幕上已渲染的内容对应的fiber树</text><text x="0" y="485.090909090909" font-family="Virgil, Segoe UI Emoji" font-size="74.61159715157676px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr"></text><text x="0" y="587.9090909090909" font-family="Virgil, Segoe UI Emoji" font-size="74.61159715157676px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">workInProgress树指的是发起一次react调度后在内存中生成的树，当workInProgress生成并</text><text x="0" y="690.7272727272727" font-family="Virgil, Segoe UI Emoji" font-size="74.61159715157676px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">commit后(即所产生的修改通过DOM节点渲染到屏幕上后)，fiberRoot.current会指向之前的</text><text x="0" y="793.5454545454545" font-family="Virgil, Segoe UI Emoji" font-size="74.61159715157676px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">workInProgress树，以确保屏幕渲染的内容和内存中的current树是一致的。</text><text x="0" y="896.3636363636363" font-family="Virgil, Segoe UI Emoji" font-size="74.61159715157676px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr"></text><text x="0" y="999.181818181818" font-family="Virgil, Segoe UI Emoji" font-size="74.61159715157676px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">之后React发起的每一次调度都会重复上面的过程。</text><text x="0" y="1102" font-family="Virgil, Segoe UI Emoji" font-size="74.61159715157676px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr"></text></g><g stroke-linecap="round"><g transform="translate(2359.714161867785 3434.7806132472538) rotate(0 -551.9019167387852 2.0603724463076105)"><path d="M1.2 -0.59 C-182.97 0.08, -919.8 4.18, -1103.97 4.71 M0.37 1.71 C-184.07 2.02, -920.85 2.93, -1105 3.21" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2359.714161867785 3434.7806132472538) rotate(0 -551.9019167387852 2.0603724463076105)"><path d="M-1077.81 -7.37 C-1085.75 -2.81, -1100.23 -0.07, -1106.09 3.01 M-1077.37 -7.38 C-1087.23 -2.46, -1097.12 -0.46, -1105.78 2.99" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(2359.714161867785 3434.7806132472538) rotate(0 -551.9019167387852 2.0603724463076105)"><path d="M-1077.79 13.15 C-1085.85 9.74, -1100.34 4.51, -1106.09 3.01 M-1077.34 13.15 C-1087.22 10.98, -1097.13 5.89, -1105.78 2.99" stroke="#000000" stroke-width="1" fill="none"></path></g></g></svg>